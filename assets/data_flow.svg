<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1353.35 1093" width="1353.35" height="1093" style="--bg:#FFFFFF;--fg:#27272A;background:var(--bg)">
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap');
  text { font-family: 'Inter', system-ui, sans-serif; }
  svg {
    /* Derived from --bg and --fg (overridable via --line, --accent, etc.) */
    --_text:          var(--fg);
    --_text-sec:      var(--muted, color-mix(in srgb, var(--fg) 60%, var(--bg)));
    --_text-muted:    var(--muted, color-mix(in srgb, var(--fg) 40%, var(--bg)));
    --_text-faint:    color-mix(in srgb, var(--fg) 25%, var(--bg));
    --_line:          var(--line, color-mix(in srgb, var(--fg) 30%, var(--bg)));
    --_arrow:         var(--accent, color-mix(in srgb, var(--fg) 50%, var(--bg)));
    --_node-fill:     var(--surface, color-mix(in srgb, var(--fg) 3%, var(--bg)));
    --_node-stroke:   var(--border, color-mix(in srgb, var(--fg) 20%, var(--bg)));
    --_group-fill:    var(--bg);
    --_group-hdr:     color-mix(in srgb, var(--fg) 5%, var(--bg));
    --_inner-stroke:  color-mix(in srgb, var(--fg) 12%, var(--bg));
    --_key-badge:     color-mix(in srgb, var(--fg) 10%, var(--bg));
  }
</style>
<defs>
  <marker id="arrowhead" markerWidth="8" markerHeight="4.8" refX="8" refY="2.4" orient="auto">
    <polygon points="0 0, 8 2.4, 0 4.8" fill="var(--_arrow)" />
  </marker>
  <marker id="arrowhead-start" markerWidth="8" markerHeight="4.8" refX="0" refY="2.4" orient="auto-start-reverse">
    <polygon points="8 0, 0 2.4, 8 4.8" fill="var(--_arrow)" />
  </marker>
</defs>
<rect x="231.58249999999998" y="40" width="252.8699999999999" height="500" rx="0" ry="0" fill="var(--_group-fill)" stroke="var(--_node-stroke)" stroke-width="1" />
<rect x="231.58249999999998" y="40" width="252.8699999999999" height="28" rx="0" ry="0" fill="var(--_group-hdr)" stroke="var(--_node-stroke)" stroke-width="1" />
<text x="243.58249999999998" y="54" dy="0.35em" font-size="12" font-weight="600" fill="var(--_text-sec)">&quot;Client Side&quot;</text>
<rect x="703.75" y="428" width="269.05" height="112" rx="0" ry="0" fill="var(--_group-fill)" stroke="var(--_node-stroke)" stroke-width="1" />
<rect x="703.75" y="428" width="269.05" height="28" rx="0" ry="0" fill="var(--_group-hdr)" stroke="var(--_node-stroke)" stroke-width="1" />
<text x="715.75" y="442" dy="0.35em" font-size="12" font-weight="600" fill="var(--_text-sec)">&quot;Encrypted Channel&quot;</text>
<rect x="40" y="601" width="1189.6025" height="268" rx="0" ry="0" fill="var(--_group-fill)" stroke="var(--_node-stroke)" stroke-width="1" />
<rect x="40" y="601" width="1189.6025" height="28" rx="0" ry="0" fill="var(--_group-hdr)" stroke="var(--_node-stroke)" stroke-width="1" />
<text x="52" y="615" dy="0.35em" font-size="12" font-weight="600" fill="var(--_text-sec)">&quot;Server Side&quot;</text>
<rect x="625.1" y="930" width="668.25" height="123" rx="0" ry="0" fill="var(--_group-fill)" stroke="var(--_node-stroke)" stroke-width="1" />
<rect x="625.1" y="930" width="668.25" height="28" rx="0" ry="0" fill="var(--_group-hdr)" stroke="var(--_node-stroke)" stroke-width="1" />
<text x="637.1" y="944" dy="0.35em" font-size="12" font-weight="600" fill="var(--_text-sec)">&quot;Persistent Storage&quot;</text>
<polyline points="374.38749999999993,174 374.38749999999993,311" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="374.38749999999993,347 374.38749999999993,367 330.35749999999996,367 330.35749999999996,484" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="374.38749999999993,347 374.38749999999993,367 418.4174999999999,367 418.4174999999999,502 725.75,502" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" marker-start="url(#arrowhead-start)" />
<polyline points="838.275,520 838.275,657" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" marker-start="url(#arrowhead-start)" />
<polyline points="838.275,693 838.275,713 410.475,713 410.475,813" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="838.275,693 838.275,813" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" marker-start="url(#arrowhead-start)" />
<polyline points="838.275,849 838.275,986" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" marker-start="url(#arrowhead-start)" />
<polyline points="838.275,693 838.275,713 1162.4,713 1162.4,986" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" marker-start="url(#arrowhead-start)" />
<rect x="337.7874999999999" y="229" width="73.2" height="27" rx="4" ry="4" fill="var(--bg)" stroke="var(--_inner-stroke)" stroke-width="0.5" />
<text x="374.38749999999993" y="242.5" text-anchor="middle" dy="0.35em" font-size="11" font-weight="400" fill="var(--_text-muted)">&quot;Commands&quot;</text>
<rect x="296.61749999999995" y="402" width="67.48" height="27" rx="4" ry="4" fill="var(--bg)" stroke="var(--_inner-stroke)" stroke-width="0.5" />
<text x="330.35749999999996" y="415.5" text-anchor="middle" dy="0.35em" font-size="11" font-weight="400" fill="var(--_text-muted)">&quot;History&quot;</text>
<rect x="376.0974999999999" y="402" width="84.64" height="27" rx="4" ry="4" fill="var(--bg)" stroke="var(--_inner-stroke)" stroke-width="0.5" />
<text x="418.4174999999999" y="415.5" text-anchor="middle" dy="0.35em" font-size="11" font-weight="400" fill="var(--_text-muted)">&quot;AppMessage&quot;</text>
<rect x="795.9549999999999" y="575" width="84.64" height="27" rx="4" ry="4" fill="var(--bg)" stroke="var(--_inner-stroke)" stroke-width="0.5" />
<text x="838.275" y="588.5" text-anchor="middle" dy="0.35em" font-size="11" font-weight="400" fill="var(--_text-muted)">&quot;AppMessage&quot;</text>
<rect x="775.935" y="904" width="124.68" height="27" rx="4" ry="4" fill="var(--bg)" stroke="var(--_inner-stroke)" stroke-width="0.5" />
<text x="838.275" y="917.5" text-anchor="middle" dy="0.35em" font-size="11" font-weight="400" fill="var(--_text-muted)">&quot;Encrypted Queries&quot;</text>
<rect x="1125.8000000000002" y="817.5" width="73.2" height="27" rx="4" ry="4" fill="var(--bg)" stroke="var(--_inner-stroke)" stroke-width="0.5" />
<text x="1162.4" y="831" text-anchor="middle" dy="0.35em" font-size="11" font-weight="400" fill="var(--_text-muted)">&quot;File I/O&quot;</text>
<circle cx="374.38749999999993" cy="135" r="39" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="322.63749999999993" y="311" width="103.5" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="253.58249999999995" y="484" width="153.55" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="725.75" y="484" width="225.05" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="750.775" y="657" width="175" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="62" y="813" width="696.95" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="782.9499999999999" y="813" width="110.65" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="647.0999999999999" y="993" width="382.35" height="33" fill="var(--_node-fill)" stroke="none" />
<line x1="647.0999999999999" y1="993" x2="647.0999999999999" y2="1026" stroke="var(--_node-stroke)" stroke-width="0.75" />
<line x1="1029.4499999999998" y1="993" x2="1029.4499999999998" y2="1026" stroke="var(--_node-stroke)" stroke-width="0.75" />
<ellipse cx="838.2749999999999" cy="1026" rx="191.175" ry="7" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<ellipse cx="838.2749999999999" cy="993" rx="191.175" ry="7" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="1053.45" y="993" width="217.9" height="33" fill="var(--_node-fill)" stroke="none" />
<line x1="1053.45" y1="993" x2="1053.45" y2="1026" stroke="var(--_node-stroke)" stroke-width="0.75" />
<line x1="1271.3500000000001" y1="993" x2="1271.3500000000001" y2="1026" stroke="var(--_node-stroke)" stroke-width="0.75" />
<ellipse cx="1162.4" cy="1026" rx="108.95" ry="7" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<ellipse cx="1162.4" cy="993" rx="108.95" ry="7" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<text x="374.38749999999993" y="135" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">User</text>
<text x="374.38749999999993" y="329" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">&quot;CLI REPL&quot;</text>
<text x="330.35749999999996" y="502" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">&quot;Command History&quot;</text>
<text x="838.275" y="502" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">&quot;WebSocket&lt;br/&gt;AES-256-GCM&quot;</text>
<text x="838.275" y="675" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">&quot;Connection Handler&quot;</text>
<text x="410.475" y="831" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">&quot;Session State&lt;br/&gt;• authenticated&lt;br/&gt;• current_user&lt;br/&gt;• current_path&lt;br/&gt;• shared_secret&quot;</text>
<text x="838.275" y="831" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">&quot;DAO Layer&quot;</text>
<text x="838.2749999999999" y="1009.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">&quot;PostgreSQL&lt;br/&gt;• users&lt;br/&gt;• groups&lt;br/&gt;• fnode&quot;</text>
<text x="1162.4" y="1009.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">&quot;File System&lt;br/&gt;storage/&quot;</text>
</svg>